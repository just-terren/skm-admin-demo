(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{8445:function(e,t,n){Promise.resolve().then(n.bind(n,9097))},2750:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r="S001"},9841:function(e,t,n){"use strict";n.d(t,{j:function(){return a},t:function(){return i}});var r=n(3712);async function a(e,t,n){return await (0,r.r)("/groups/query",{method:"POST",body:{...e,...t},signal:n})}async function i(e,t,n){return await (0,r.r)("/groups-mappings/query",{method:"POST",body:{...e,...t},signal:n})}},3712:function(e,t,n){"use strict";async function r(e){let{query:t,headers:n={"Content-Type":"application/json"},body:r,mode:a="cors",...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=await fetch("".concat("https://skm-report-test-a70f647b267b.herokuapp.com").concat(e).concat(t?"?".concat(new URLSearchParams(Object.entries(t).reduce((e,t)=>{let[n,r]=t;return e[n]=r.toString(),e},{})).toString()):""),{...i,headers:n,body:r&&JSON.stringify(r),mode:a});return await o.json()}n.d(t,{r:function(){return r}})},9097:function(e,t,n){"use strict";n.r(t);var r=n(7437),a=n(9841),i=n(1991),o=n(8608),l=n(1032),s=n(9263),c=n(2265),u=n(6216),d=n(2750),m=n(1723);let g=[{title:"動作",render:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{look:"link",onClick:()=>{},children:"編輯"})," ",(0,r.jsx)(i.Z,{look:"link",onClick:()=>{},children:"複製"})]})},{dataIndex:"no",title:"檔案編號"},{dataIndex:"name",title:"名稱"},{dataIndex:"reportCloudPath",title:"雲端路徑"},{dataIndex:"emailAddress",title:"電子信箱"}],p=(0,c.memo)(function(){let{tableProps:e,search:{submit:t}}=(0,s.w)(async(e,t,n)=>{let{page:r,pageSize:i}=t,{code:o,message:l,data:s,currentPage:c,pageSize:u,totalPage:g}=await (0,a.j)(e,{pageNum:r,pageSize:i},n);return o===d.m?{items:s,page:c,pageSize:u,totalPages:g}:(m.Z.error(l),{items:[],page:1,pageSize:i,totalPages:0})});return(0,r.jsxs)("div",{className:"flex flex-col gap-12",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(u.l0,{onSubmit:e=>{t(e)},render:e=>{let{handleSubmit:t}=e;return(0,r.jsx)("form",{onSubmit:t,children:(0,r.jsx)(u.gN,{name:"no",render:e=>{let{input:{value:t,onChange:n}}=e;return(0,r.jsx)(o.Z,{placeholder:"Search",value:t,onChange:n})}})})}})}),(0,r.jsx)(i.Z,{look:"primary",onClick:()=>{},children:"新增"})]}),(0,r.jsx)(l.Z,{...e,rowKeyName:"no",columns:g})]})});t.default=p},1991:function(e,t,n){"use strict";var r=n(7437),a=n(2744),i=n.n(a);let o=(0,n(2265).memo)(function(e){let{look:t="default",className:n,disabled:a,children:o,...l}=e;return(0,r.jsx)("button",{...l,className:i()({"rounded-md border bg-white px-3 py-1.5 hover:bg-slate-50 disabled:bg-gray-200 disabled:text-gray-400":"default"===t,"rounded-md border border-blue-600 bg-blue-600 px-3 py-1.5 text-white hover:bg-blue-700 disabled:border-blue-500 disabled:bg-blue-500 disabled:text-gray-300":"primary"===t,"text-blue-600 hover:text-blue-700 hover:underline disabled:text-gray-400 disabled:no-underline":"link"===t},n),disabled:a,children:o})});t.Z=o},8608:function(e,t,n){"use strict";var r=n(7437),a=n(2265);let i=(0,a.memo)((0,a.forwardRef)(function(e,t){let{...n}=e;return(0,r.jsx)("input",{...n,className:"rounded-md border px-3 py-1.5 focus-visible:outline focus-visible:outline-blue-400",ref:t})}));t.Z=i},791:function(e,t,n){"use strict";n.r(t);var r=n(7437),a=n(2265),i=n(1991),o=n(2744),l=n.n(o);let s=(0,a.memo)(function(e){let{active:t,className:n,...a}=e;return(0,r.jsx)(i.Z,{...a,className:l()("rounded-none border-0 !px-3 !py-1.5",{"!text-blue-600":t},n)})}),c=(0,a.memo)(function(e){return(0,r.jsx)(s,{...e,className:"disabled:!bg-white",disabled:!0,children:"..."})}),u=(0,a.memo)(function(e){let{className:t,page:n,pageSize:i,total:o,totalPages:u,onChange:d}=e,m=n,g=i;m<1&&(m=1,console.error("page must be greater than or equal to 1")),g<1&&(g=1,console.error("pageSize must be greater than or equal to 1"));let p=u?Math.max(u,1):Math.max(Math.ceil(o/g),1);m>p&&(m=p,console.error("page must be less than or equal to total pages"));let f=(0,a.useRef)(m);f.current=m;let b=(0,a.useRef)(g);b.current=g;let h=(0,a.useRef)(new Map),x=(0,a.useRef)(d);x.current=d;let v=(0,a.useCallback)(e=>{if(h.current.has(e))return h.current.get(e);{let t=()=>{if(f.current!==e){var t;null===(t=x.current)||void 0===t||t.call(x,e,b.current)}};return h.current.set(e,t),t}},[]),j=Math.max(m-1,2),y=Math.min(m+1,p-1);return(0,r.jsxs)("div",{className:l()("divide-x overflow-hidden rounded-md border",t),children:[(0,r.jsx)(s,{disabled:1===m,onClick:v(m-1),children:"<"}),(0,r.jsx)(s,{active:1===m,onClick:v(1),children:"1"}),j>2&&(0,r.jsx)(c,{}),Array.from({length:y-j+1},(e,t)=>t+j).map(e=>(0,r.jsx)(s,{active:m===e,onClick:v(e),children:e},e)),p-y>1&&(0,r.jsx)(c,{}),p>1&&(0,r.jsx)(s,{active:m===p,onClick:v(p),children:p}),(0,r.jsx)(s,{disabled:m===p,onClick:v(m+1),children:">"})]})});t.default=u},1032:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(7437),a=n(2265),i=n(791),o=n(1872),l=n(2744),s=n.n(l);let c=(0,a.memo)(function(e){let{className:t,spinning:n=!1,size:a="10",expand:i,children:o}=e;return(0,r.jsxs)("div",{className:s()("relative inline-block",{"h-full w-full":i},t),children:[o,n&&(0,r.jsx)("div",{className:s()("flex items-center justify-center",{"absolute inset-0  bg-white opacity-70":o}),children:(0,r.jsx)("div",{className:s()("animate-spin rounded-full border-solid border-slate-100 border-t-blue-500",{"h-2.5 w-2.5 border-2":"2.5"===a,"h-10 w-10 border-4":"10"===a})})})]})});var u=(0,a.memo)(function(e){let{className:t,rowKeyName:n,columns:l,dataSource:s,loading:u,pagination:d,onChange:m}=e,g=(0,a.useMemo)(()=>l.map(e=>{var t,n;return[(null===(t=e.key)||void 0===t?void 0:t.toString())||(null===(n=e.dataIndex)||void 0===n?void 0:n.toString())||(0,o.Z)(),e]}),[l]),p=(0,a.useMemo)(()=>(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"border-b border-slate-200",children:g.map(e=>{let[t,{title:n}]=e;return(0,r.jsx)("th",{className:"p-2 text-start",children:n},t)})})}),[g]),f=(0,a.useMemo)(()=>(0,r.jsx)("tbody",{children:null==s?void 0:s.map(e=>{var t;return(0,r.jsx)("tr",{className:"border-b border-slate-200",children:g.map(t=>{var n;let[a,{dataIndex:i,render:o}]=t;return(0,r.jsx)("td",{className:"p-2",children:o?o(i&&e[i],e):i&&(null===(n=e[i])||void 0===n?void 0:n.toString())},a)})},null===(t=e[n])||void 0===t?void 0:t.toString())})}),[s,g,n]),b=(0,a.useMemo)(()=>d&&{...d,onChange:m},[d,m]);return(0,r.jsx)(c,{className:t,spinning:u,expand:!0,children:(0,r.jsxs)("div",{className:"flex flex-col gap-12",children:[(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full border-collapse",children:[p,f]})}),b&&(0,r.jsx)(i.default,{...b,className:"self-center overflow-auto"})]})})})},1723:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(7437),a=n(2265),i=n(4040),o=n(2744),l=n.n(o);let s=(0,a.memo)(function(e){let{children:t,icon:n,remove:i}=e,o=(0,a.useRef)(i),[s,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{setTimeout(()=>{c(!1),setTimeout(()=>{o.current()},300)},3e3)},[]),(0,r.jsxs)("div",{className:l()("my-2 rounded bg-white px-4 py-2 shadow",s?"animate-[fade-in_".concat(.3,"s_ease-in-out]"):"animate-[fade-out_".concat(.3,"s_ease-in-out]")),children:[n," ",t]})});function c(e,t){let{render:n,remove:a}=function(e,t){let n;let r=((n=document.getElementById(e))||((n=document.createElement("div")).id=e,document.body.appendChild(n)),t&&(n.className=t),n),a=document.createElement("div");r.appendChild(a);let o=(0,i.createRoot)(a);return{render:e=>{o.render(e)},remove:()=>{o.unmount(),r.removeChild(a)}}}("toastRoot","fixed top-0 left-1/2 -translate-x-1/2 z-[".concat(2e3,"]"));n((0,r.jsx)(s,{icon:t,remove:a,children:e}))}var u={success:e=>{c(e,"success")},error:e=>{c(e,"error")}}},9263:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(2265),a=n(6970);function i(e){let{manual:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{manual:!1},[n,i]=(0,a.x)({dataSource:[],pagination:{page:1,pageSize:20,total:0,totalPages:0},loading:!1}),o=(0,r.useRef)(new AbortController),l=(0,r.useCallback)(async(t,n)=>{o.current.abort();let r=new AbortController;o.current=r;let a=await e(t,n,r.signal);if(r.signal.aborted)throw new DOMException(void 0,"AbortError");return a},[e]),s=(0,r.useCallback)(async(e,t)=>{i(n=>{n.pagination.page=e,n.pagination.pageSize=t,n.loading=!0});try{let{items:r,page:a,pageSize:o,totalPages:s}=await l(n.filter,{page:e,pageSize:t});i(e=>{e.dataSource=r,e.pagination.page=a,e.pagination.pageSize=o,e.pagination.total=0,e.pagination.totalPages=s,e.loading=!1})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw i(e=>{e.dataSource=[],e.pagination.page=1,e.pagination.total=0,e.pagination.totalPages=0,e.loading=!1}),e}},[l,n.filter,i]),c=(0,r.useMemo)(()=>({...n,onChange:s}),[n,s]),u=(0,r.useCallback)(async e=>{i(t=>{t.filter=e,t.pagination.page=1,t.loading=!0});try{let{items:t,page:r,totalPages:a}=await l(e,{page:1,pageSize:n.pagination.pageSize});i(e=>{e.dataSource=t,e.pagination.page=r,e.pagination.totalPages=a,e.loading=!1})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw i(e=>{e.dataSource=[],e.pagination.page=1,e.pagination.total=0,e.pagination.totalPages=0,e.loading=!1}),e}},[l,i,n.pagination.pageSize]),d=(0,r.useRef)(u);d.current=u,(0,r.useEffect)(()=>{t||d.current()},[t]);let m=(0,r.useMemo)(()=>({submit:u}),[u]);return(0,r.useMemo)(()=>({tableProps:c,search:m}),[c,m])}}},function(e){e.O(0,[138,971,938,744],function(){return e(e.s=8445)}),_N_E=e.O()}]);